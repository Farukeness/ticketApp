@{
    Layout = "~/Views/Shared/_adminLayout.cshtml";
}

@(Html.Kendo().Grid<ticketApp.ViewModel.UserGridModel>().Name("UserGrid")
    
    .Columns(columns => {
        columns.Bound(c => c.UserName).Title("İsim");
        columns.Bound(c => c.Email).Title("E Posta").Width(120);
        columns.Bound(c => c.CurrentRole).Title("Rol").EditorTemplateName("RoleDropdown").Width(300);
        
        columns.Template("<a href='Admin/Edit/#=Id#' class='btn btn-primary'>Detay</a>").Title("Detay").HtmlAttributes(new {style ="color:white"});
               
    })
    
    .Editable(editable => editable.Mode(GridEditMode.InCell))
    .Pageable()
    .Sortable()
    .Filterable()
    .Resizable(r=>r.Columns(true))
    .Reorderable(r => r.Columns(true))
    
    .DataSource(dataSource => dataSource
    .Ajax()
    .AutoSync(true)
    .Batch(false)
    .Model(model => {
        model.Id(p => p.Id);
        model.Field(p => p.UserName).Editable(false);
        model.Field(p => p.Email).Editable(false);
        model.Field(p => p.CurrentRole).Editable(true).DefaultValue("Seçiniz");
    })
    
    .Read(read => read.Action("Users","Grid"))
    .Update(update => update.Action("UpdateUserRole","Grid"))
    ))

